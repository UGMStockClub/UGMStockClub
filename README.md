# UGM Stock Club Website Monorepo

This monorepo contains the source code for the University Stock Club's official website and its accompanying Content Management System (CMS).

## Overview

This project utilizes a monorepo structure managed by `pnpm` workspaces. It includes:

*   **`apps/frontend`**: The public-facing website built with SvelteKit, Tailwind CSS, and Shadcn-Svelte. Displays the Landing Page, About Us, Stock Dictionary, Articles, and Events pages, fetching data from Supabase.
*   **`apps/cms`**: The admin dashboard (Content Management System) also built with SvelteKit, Tailwind CSS, and Shadcn-Svelte. Used by club admins to manage articles and events stored in the Supabase database. Requires authentication via Supabase Auth.
*   **`packages/`** (Optional - *to be added later*): Directory for shared code, such as UI components (`ui`), TypeScript types (`types`), or shared configurations (`config`).

## Tech Stack

*   **Framework**: SvelteKit
*   **Package Manager**: pnpm (Workspaces)
*   **UI Components**: Shadcn-Svelte
*   **Styling**: Tailwind CSS
*   **Backend & Database**: Supabase (PostgreSQL, Auth, Storage)
*   **Deployment**: Cloudflare Pages

## Prerequisites

*   Node.js (v18 or higher recommended)
*   pnpm (v8 or higher recommended - install via `npm install -g pnpm`)
*   Git
*   Cloudflare Account

## Getting Started

1.  **Clone the repository:**
    ```bash
    git clone <your-repo-url>
    cd UGMStockClub
    ```

2.  **Install dependencies:**
    *   Run `pnpm install` from the **root** directory. This will install dependencies for the entire monorepo.
    ```bash
    pnpm install
    ```

3.  **Set up Environment Variables:**
    *   Create a `.env` file in the **root** directory (`UGMStockClub/.env`).
    *   Copy the contents of `.env.example` (if it exists) or add the following variables, replacing the placeholders with your actual Supabase credentials:
      ```dotenv
      # UGMStockClub/.env

      # Public Supabase credentials (safe to expose in browser context via SvelteKit's $env/static/public)
      PUBLIC_SUPABASE_URL=YOUR_SUPABASE_PROJECT_URL
      PUBLIC_SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY

      # Add other variables as needed later
      ```
    *   You can get these values from your Supabase project settings (Project Settings > API).

## Development

You can run each application's development server independently using `pnpm --filter`.

1.  **Run the Frontend App (Public Website):**
    ```bash
    # Starts dev server typically on http://localhost:5173
    pnpm --filter frontend dev
    ```

2.  **Run the CMS App (Admin Dashboard):**
    ```bash
    # Starts dev server typically on a different port, e.g., http://localhost:5174
    pnpm --filter cms dev
    ```

    *Note: You might need to run these commands in separate terminal windows.*

## Building for Production

You can build each application independently or build all apps in the workspace. Ensure the correct SvelteKit adapter (`@sveltejs/adapter-cloudflare` or `@sveltejs/adapter-auto`) is configured in the respective `svelte.config.js` files before building for Cloudflare.

1.  **Build the Frontend App:**
    ```bash
    pnpm --filter frontend build
    ```

2.  **Build the CMS App:**
    ```bash
    pnpm --filter cms build
    ```

3.  **Build All Apps:**
    ```bash
    # Runs the 'build' script in every package.json found within the workspace
    pnpm -r build
    ```
    *Output directories will be within each app's folder (e.g., `apps/frontend/.svelte-kit/functions` or `apps/frontend/build/_worker.js` depending on adapter config).*

## Deployment (Cloudflare Pages)

This project is configured for deployment on **Cloudflare Pages**, which has excellent support for monorepos and SvelteKit.

1.  **Connect Repository:** Link your GitHub repository to Cloudflare Pages.
2.  **Configure Production Deployment:**
    *   **Project Name:** Choose a name (e.g., `ugm-stock-club-site`).
    *   **Production Branch:** `main` (or your primary branch).
    *   **Build Configuration:**
        *   **Framework Preset:** Select `SvelteKit`.
        *   **Root Directory (Monorepo):** Leave this as the repository root (`/`). Cloudflare Pages handles monorepos based on the build command paths.
        *   **Build Command:** `pnpm -r build` (This tells Cloudflare to run the build script defined in the `package.json` of *each* project within the workspace).
        *   **Build Output Directory:** Cloudflare Pages typically determines this automatically from the SvelteKit preset. It looks for the specific output structure generated by the Cloudflare adapter.
3.  **Configure CMS Deployment (Separate Project or Custom Domain):**
    *   You will likely need to set up a **second Cloudflare Pages project** linked to the *same* repository but configured to deploy only the `cms` app.
    *   **Option A (Separate Project):**
        *   Create a new Cloudflare Pages project (e.g., `ugm-stock-club-cms`).
        *   Link to the same repository.
        *   **Build Command:** `pnpm --filter cms build` (Build only the CMS).
        *   Assign this project to your admin subdomain (e.g., `admin.yourclub.com`).
    *   **Option B (Advanced - Single Project, Requires Workers):** Deploying both to different subdomains from a single project is more complex and might involve Cloudflare Workers for routing based on hostname. The separate project approach is often simpler initially.
4.  **Environment Variables:**
    *   In **both** Cloudflare Pages projects (frontend and cms), navigate to Settings > Environment Variables.
    *   Add `PUBLIC_SUPABASE_URL` and `PUBLIC_SUPABASE_ANON_KEY` under "Production" and optionally "Preview". Ensure they are set for both apps.
5.  **Domains:**
    *   Configure your custom domain (e.g., `yourclub.com`) for the `frontend` Cloudflare Pages project.
    *   Configure your admin subdomain (e.g., `admin.yourclub.com`) for the `cms` Cloudflare Pages project.

*(Refer to Cloudflare Pages documentation for the most up-to-date monorepo and SvelteKit deployment instructions.)*

---

*(Add sections for Contribution Guidelines, Testing, etc., as the project evolves)*